import java.lang.reflect.Array;
import java.util.*;
import java.util.ArrayList;

/**
 * Group Project -- Messaging
 * <p>
 * This class creates Messaging objects for our platform
 * so that users are able to send and receive messages
 *
 * @author L30-Team 1, CS180
 * @version Nov 3, 2024
 */

public class Messaging implements MessagingInterface {
    private User sender; // A variable that holds the User who sent the comment
    private User receiver; // A variable that holds the User who received the comment
    private String messageContent; // A variable that holds the message being sent/received as a String

    // The Messaging class constructor assigns the Users, String, and boolean given in the parameter
    // to the corresponding instance variables, it sets all the other values to our platform default settings
    public Messaging(User sender, User receiver, String messageContent) {
        this.sender = sender;
        this.receiver = receiver;
        this.messageContent = messageContent;

    }

    // A void method that sends a Message from one User to another, it throws an Exception if
    // the User is trying to send a message to a User who blocked them or if the receiver can
    // only receive messages from friends, and the User sending a message is not a friend
    public void sendMessage() throws InvalidException {
        if (sender.getBlocked().contains(receiver)) {
            throw new InvalidException("Cannot send message, user is blocked");
        } else if (!sender.getFriends().contains(receiver) && receiver.isPriv()) {
            throw new InvalidException("Cannot send message, user is private");
        }
        User.getMessages.add(messageContent);
        System.out.println("Message sent: " + messageContent);
    }

    // A void method that deletes a message
    public void deleteMessage(String targetMessage) throws InvalidException{
        if (User.getMessages.contains(targetMessage)) {
            User.getMessages.remove(targetMessage);
            System.out.println("Removed: " + targetMessage);
        } else {
            throw new InvalidException("Message not found!");
        }
    }

    public User getSender() {
        return sender;
    }

    public User getReceiver() {
        return receiver;
    }

    public String getMessageContent() {
        return messageContent;
    }
    

}
